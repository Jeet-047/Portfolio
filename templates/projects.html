{% extends "base.html" %}

{% block title %}Projects{% endblock %}

{% block head_extra %}
    <style>
        /* Projects Page Specific Styles for 3D Illusion */
        .project-bg-container {
            /* --- MODIFICATION: Fixed position to cover the entire page --- */
            position: fixed; 
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            pointer-events: none;
            perspective: 1000px; /* Essential for 3D effect */
            z-index: -1; /* IMPORTANT: Keeps background behind all content */
        }
        .cube {
            position: absolute;
            width: 30px;
            height: 30px;
            /* Using a darker, more subtle background for the cubes */
            background: rgba(45, 45, 60, 0.15); 
            border: 1px solid rgba(79, 70, 229, 0.2);
            border-radius: 6px;
            
            /* --- ENHANCEMENT: Increased subtle glow to the cubes --- */
            box-shadow: 0 0 8px rgba(79, 70, 229, 0.8), inset 0 0 5px rgba(139, 92, 246, 0.6); /* Primary color glow */
            
            animation: float 20s infinite ease-in-out, spin var(--duration) linear infinite;
        }

        /* Custom spin animation - ENHANCEMENT: Added rotateZ for a more dynamic "twist" */
        @keyframes spin {
            0% { transform: rotateY(0deg) rotateX(0deg) rotateZ(0deg); }
            50% { transform: rotateY(180deg) rotateX(180deg) rotateZ(90deg); }
            100% { transform: rotateY(360deg) rotateX(360deg) rotateZ(180deg); }
        }

        /* --- MODIFIED STYLES FOR PROJECT CARD (Premium Modular Accent Card) --- */
        .project-card {
            /* Glassy / gradient background for a premium look */
            background: radial-gradient(circle at top left, rgba(59, 130, 246, 0.20), rgba(15, 23, 42, 0.96));
            border: 1px solid rgba(148, 163, 184, 0.25);
            
            /* Initial Shadow */
            box-shadow: 0 18px 45px rgba(15, 23, 42, 0.85);
            
            /* Transitions for smooth effects */
            transition: transform 0.35s ease, box-shadow 0.35s ease, border-color 0.35s ease;
            
            position: relative;
            overflow: hidden;
            backdrop-filter: blur(18px);
            -webkit-backdrop-filter: blur(18px);
        }

        /* Subtle inner glow & border ring */
        .project-card::before {
            content: "";
            position: absolute;
            inset: 0;
            border-radius: 1rem;
            border: 1px solid rgba(129, 140, 248, 0.18);
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.35s ease;
        }

        .project-card::after {
            content: "";
            position: absolute;
            inset: -40%;
            background: radial-gradient(circle at top left, rgba(129, 140, 248, 0.35), transparent 60%);
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.4s ease, transform 0.4s ease;
            transform: translate3d(-10px, -10px, 0);
        }

        /* Custom Radial Gradient for Card Depth (kept subtle under new glass background) */
        .project-card-bg {
            background: radial-gradient(circle at 10% 10%, rgba(79, 70, 229, 0.05) 0%, rgba(30, 41, 59, 0.95) 60%);
            width: 100%;
            height: 100%;
            position: absolute;
            top: 0;
            left: 0;
            z-index: 0;
        }

        /* Hover Effect: Lift and Glow */
        .project-card:hover {
            transform: translateY(-10px) scale(1.02);
            /* Soft glow based on primary color */
            box-shadow: 0 22px 60px rgba(15, 23, 42, 0.95), 0 0 40px rgba(79, 70, 229, 0.75);
            border-color: rgba(191, 219, 254, 0.55);
        }

        .project-card:hover::before {
            opacity: 1;
        }

        .project-card:hover::after {
            opacity: 1;
            transform: translate3d(0, 0, 0);
        }

        /* Vertical accent line on the left side of the card */
        .project-accent-bar {
            position: absolute;
            top: 0;
            left: 0;
            width: 4px; /* Slimmer for mobile */
            height: 100%;
            transition: width 0.3s ease, box-shadow 0.3s ease;
            /* Added shadow for depth on the bar itself */
            box-shadow: 3px 0 10px rgba(0, 0, 0, 0.5); 
        }
        
        @media (min-width: 640px) {
            .project-accent-bar {
                width: 6px; /* Slightly slimmer by default */
            }
        }
        
        .project-card:hover .project-accent-bar {
            width: 8px; /* Expands on hover for mobile */
            box-shadow: 6px 0 22px rgba(15, 23, 42, 0.9);
        }
        
        @media (min-width: 640px) {
            .project-card:hover .project-accent-bar {
                width: 11px; /* Expands on hover for desktop */
            }
        }

        /* Technology badges for better contrast */
        .tech-badge {
            font-weight: 600;
            border: 1px solid currentColor;
            transition: background-color 0.25s ease, transform 0.25s ease, box-shadow 0.25s ease;
            box-shadow: 0 0 0 rgba(15, 23, 42, 0);
        }

        .tech-badge:hover {
            transform: translateY(-1px);
            box-shadow: 0 8px 20px rgba(15, 23, 42, 0.85);
            background-color: rgba(15, 23, 42, 0.9);
        }
        
        /* Gradient Button Style for CTA (minimal, clean, animated gradient) */
        .gradient-cta {
            /* Subtle animated gradient background */
            background-image: linear-gradient(120deg, #1f2937, #4f46e5, #8b5cf6, #1f2937);
            background-size: 220% 220%;
            color: #e5e7eb;
            font-weight: 600;
            text-align: center;
            padding: 9px 18px;
            border-radius: 9999px; 
            transition: all 0.3s ease;
            letter-spacing: 0.03em;
            border: 1px solid rgba(148, 163, 184, 0.6);
            box-shadow: none;
            animation: buttonGradient 8s ease infinite;
        }
        
        .gradient-cta:hover {
            transform: translateY(-1px);
            border-color: rgba(191, 219, 254, 0.9);
            animation-duration: 6s;
        }

        @keyframes buttonGradient {
            0% {
                background-position: 0% 50%;
            }
            50% {
                background-position: 100% 50%;
            }
            100% {
                background-position: 0% 50%;
            }
        }
    </style>
{% endblock %}

{% block content %}
    <!-- 3D Background Container is now FIXED and covers the entire page -->
    <div class="project-bg-container">
        <!-- Cubes are injected by JavaScript -->
    </div>

    <section id="projects-content" class="py-12 sm:py-16 md:py-20 lg:py-32 relative min-h-screen">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10">
            <h2 class="text-3xl sm:text-4xl md:text-5xl font-extrabold text-center text-white mb-4 sm:mb-6 animated-element">My Creative Works</h2>
            <p class="text-base sm:text-lg md:text-xl text-center text-gray-400 mb-8 sm:mb-12 md:mb-16 px-4 animated-element" style="animation-delay: 0.1s;">A selection of projects that demonstrate my technical range and passion for innovation.</p>

            <div class="grid grid-cols-1 sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 sm:gap-8 md:gap-10 lg:gap-12">
                {% for project in data.projects %}
                <!-- PREMIUM MODULAR ACCENT CARD DESIGN -->
                <div class="project-card rounded-xl sm:rounded-2xl transition duration-500 animated-element" style="animation-delay: {{ loop.index * 0.2 }}s;">
                    
                    <!-- Radial Gradient Layer (Z-index 0) -->
                    <div class="project-card-bg rounded-xl sm:rounded-2xl"></div>

                    <!-- Vertical Accent Bar -->
                    <div class="project-accent-bar {{ project.color }}"></div>

                    <div class="p-6 sm:p-8 space-y-4 sm:space-y-5 relative z-10">
                        
                        <!-- Header Block: Icon and Title -->
                        <div class="flex items-center space-x-3 sm:space-x-4 mb-3 sm:mb-4">
                            <!-- Large, distinctive icon with color accent -->
                            <div class="text-3xl sm:text-4xl md:text-5xl font-bold {{ project.color | replace('bg-', 'text-') }}">{{ project.icon }}</div>
                            <h3 class="text-xl sm:text-2xl md:text-3xl font-extrabold text-white leading-tight">{{ project.title }}</h3>
                        </div>
                        
                        <!-- Description Block -->
                        <p class="text-gray-300 text-sm sm:text-base font-light border-l border-gray-600/50 pl-3 sm:pl-4">{{ project.desc }}</p>
                        
                        <!-- Technology Badges -->
                        <div class="pt-3 sm:pt-4 flex flex-wrap gap-2 sm:gap-3 border-t border-gray-700/50">
                            <span class="text-xs sm:text-sm text-primary font-bold mr-1 w-full sm:w-auto">Stack:</span>
                            {% for tech in project.tech.split(', ') %}
                            <span class="tech-badge inline-block text-xs font-mono px-2 sm:px-3 py-1 rounded-full 
                                {% if loop.cycle('', '', '') == 0 %}
                                    bg-indigo-600/20 text-indigo-300 border-indigo-300
                                {% elif loop.cycle('', '', '') == 1 %}
                                    bg-emerald-600/20 text-emerald-300 border-emerald-300
                                {% else %}
                                    bg-rose-600/20 text-rose-300 border-rose-300
                                {% endif %}
                            ">{{ tech }}</span>
                            {% endfor %}
                        </div>
                        
                        <!-- Call to Action Button (Full Gradient) -->
                        <a href="#" class="gradient-cta block w-full text-center mt-4 sm:mt-6 text-sm sm:text-base relative z-10" style="pointer-events: auto; touch-action: manipulation; cursor: pointer;">
                            View Project â†’
                        </a>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
    </section>
{% endblock %}

{% block body_end_script %}
    <script>
        // --- 3D Background Element Generation ---
        function createCube() {
            const cube = document.createElement('div');
            cube.classList.add('cube');

            // Random position and size - Responsive size range
            const isMobile = window.innerWidth < 640;
            const size = isMobile ? Math.random() * 40 + 20 : Math.random() * 80 + 30; // 20-60px mobile, 30-110px desktop
            cube.style.width = `${size}px`;
            cube.style.height = `${size}px`;
            cube.style.left = `${Math.random() * 100}vw`;
            cube.style.top = `${Math.random() * 100}vh`;

            // Random animation speed and duration
            const duration = Math.random() * 30 + 10; // 10s to 40s
            cube.style.setProperty('--duration', `${duration}s`);
            cube.style.animationDuration = `${duration}s, ${Math.random() * 15 + 5}s`;
            
            // Random depth (Z-translation)
            const zDepth = Math.random() * 400 - 200; // -200px (near) to +200px (far)
            
            // Set initial transform
            cube.style.transform = `translateZ(${zDepth}px) rotateX(${Math.random() * 360}deg) rotateY(${Math.random() * 360}deg)`;
            
            // Opacity based on depth: deeper = more transparent (subtle effect)
            // --- MODIFICATION: Opacity range increased from (0.1-0.3) to (0.2-0.5) for better visibility ---
            const normalizedDepth = (zDepth + 200) / 400; // Normalize Z to 0-1
            cube.style.opacity = `${0.2 + (0.3 * (1 - normalizedDepth))}`; 

            document.querySelector('.project-bg-container').appendChild(cube);
        }

        // Create cubes - fewer on mobile for performance
        const isMobile = window.innerWidth < 640;
        const cubeCount = isMobile ? 25 : 50;
        for (let i = 0; i < cubeCount; i++) {
            createCube();
        }
    </script>
{% endblock %}